<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chi tiết đơn hàng</title>
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
  />
  <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  />
  <link rel="stylesheet" th:href="@{/css/global.css}" type="text/css" />
  <link rel="stylesheet" th:href="@{/css/order_detail.css}" type="text/css" />
</head>
<body>
<!-- Navigation -->
<div th:replace="fragments/navbar :: navbar"></div>

<div class="main-content">
  <div class="container">
    <div class="order-details">
      <h1 class="order-title">
        Chi tiết đơn hàng #<span th:text="${order.id}">0</span>
      </h1>

      <div class="order-info">
        <p>
          <strong>Ngày đặt:</strong>
          <span
                  th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy HH:mm')}">01/01/2025</span>
        </p>
        <p>
          <strong>Trạng thái:</strong>
          <span th:text="${order.status}">Đang xử lý</span>
        </p>
        <p>
          <strong>Tổng tiền:</strong>
          <span class="total-price" th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')}">0</span> VND
        </p>
        <p>
          <strong>Địa chỉ giao hàng:</strong>
          <span th:text="${order.shippingAddressDetail}">Số 123, Đường ABC, Quận 1, TP.HCM</span>
        </p>
        <p>
          <strong>Phương thức thanh toán:</strong>
          <span th:text="${order.paymentMethod}">Thanh toán khi nhận hàng (COD)</span>
        </p>
      </div>

      <h2 class="section-title">Danh sách sản phẩm</h2>
      <table class="product-table table table-striped">
        <thead>
        <tr>
          <th>Hình ảnh</th>
          <th>Sản phẩm</th>
          <th>Size</th> <!-- Added Size Column -->
          <th>Số lượng</th>
          <th>Giá</th>
          <th>Thành tiền</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${order.orderItems}">
          <td>
            <!-- Hiển thị hình ảnh sản phẩm -->
            <img th:if="${!item.product.images.isEmpty()}"
                 th:src="@{${item.product.images[0].imageUrl}}"
                 class="img-thumbnail"
                 alt="Product Image"
                 width="100" height="100"/>
            <img th:if="${item.product.images.isEmpty()}"
                 th:src="@{/images/placeholder.jpg}"
                 class="img-thumbnail"
                 alt="No Image"
                 width="100" height="100"/>
          </td>
          <td th:text="${item.product.name}">Tên sản phẩm</td>
          <td th:text="${item.getMeasurement().getNote()}">Size</td> <!-- Display the size here -->
          <td th:text="${item.quantity}">1</td>
          <td th:text="${#numbers.formatDecimal(item.product.price, 0, 'COMMA', 0, 'POINT')}">0</td>
          <td th:text="${#numbers.formatDecimal(item.product.price * item.quantity, 0, 'COMMA', 0, 'POINT')}">0</td>
        </tr>
        </tbody>
      </table>

      <div class="back-link">
        <a th:href="@{'/order/list?userId=' + ${order.user.id}}">← Quay lại danh sách đơn hàng</a>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<div th:replace="fragments/footer :: footer"></div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
